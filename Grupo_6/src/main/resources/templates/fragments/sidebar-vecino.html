<style>
    .nav-link.active {
        background-color: rgba(255,255,255,0.2);
        border-radius: 0.375rem;
    }

    .rotate-icon {
        transition: transform 0.3s ease;
    }

    .rotate-icon.rotated {
        transform: rotate(180deg);
    }

    .sidebar {
        width: 250px;
        min-height: 100vh;
        background-color: #0d6efd;
        transition: all 0.3s ease;
        overflow-x: hidden;
    }

    body.sidebar-collapsed .sidebar {
        width: 0;
    }

    body.sidebar-collapsed .main {
        margin-left: 0 !important;
    }

    .sidebar-header img {
        max-width: 75px;
        height: auto;
    }

    .municipality-name {
        font-size: 0.9rem;
        font-weight: 500;
        margin-top: 0.25rem;
    }
</style>

<nav id="sidebar" class="sidebar" th:fragment="sidebar">
    <!-- Encabezado con logo -->
    <div class="sidebar-header text-center py-4 border-bottom border-white">
        <a th:href="@{/vecino}" class="d-block">
            <img th:src="@{/img/logo_sanmiguel.png}" alt="Logo Municipalidad">
        </a>
        <div class="municipality-name text-white text-center"
             th:text="${usuario != null ? usuario.nombres + ' ' + usuario.apellidos : 'Vecino'}">
            Vecino
        </div>
    </div>

    <!-- Menú de navegación -->
    <ul class="nav flex-column text-white p-3">
        <li class="nav-item mb-2">
            <a th:href="@{/vecino}" class="nav-link text-white d-flex align-items-center">
                <i class="bi bi-house-door-fill me-2"></i> Inicio
            </a>
        </li>

        <li class="nav-item mb-2">
            <a th:href="@{/vecino/reservas/historial}" class="nav-link text-white d-flex align-items-center">
                <i class="bi bi-calendar-check-fill me-2"></i> Mis Reservas
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link text-white d-flex justify-content-between align-items-center"
               data-bs-toggle="collapse"
               href="#submenuReservar"
               role="button"
               th:attr="aria-expanded=${idtipoActivo != null}"
               aria-controls="submenuReservar">
                <span><i class="bi bi-bookmark-plus-fill me-2"></i> Reservar</span>
                <i class="bi bi-chevron-down rotate-icon"
                   th:classappend="${idtipoActivo != null} ? ' rotated' : ''"></i>
            </a>

            <div class="collapse ps-3 [[${idtipoActivo != null} ? 'show' : '']]" id="submenuReservar">
                <ul class="nav flex-column mt-2">
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=2)}"
                           th:class="'nav-link text-white' + (${idtipoActivo == 2} ? ' active fw-bold' : '')"> Gimnasio</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=4)}"
                           th:class="'nav-link text-white' + (${idtipoActivo == 4} ? ' active fw-bold' : '')"> Cancha Vóley</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=3)}"
                           th:class="'nav-link text-white' + (${idtipoActivo == 3} ? ' active fw-bold' : '')"> Cancha Fútbol</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=1)}"
                           th:class="'nav-link text-white' + (${idtipoActivo == 1} ? ' active fw-bold' : '')"> Piscina</a>
                    </li>
                    <li class="nav-item">
                        <a th:href="@{/vecino/ListaComplejoDeportivo(idtipo=7)}"
                           th:class="'nav-link text-white' + (${idtipoActivo == 7} ? ' active fw-bold' : '')"> Atletismo</a>
                    </li>
                </ul>
            </div>
        </li>
    </ul>
</nav>


